# RTZR ì‹¤ì œ í†µí™” ë¡œê·¸ ë¶„ì„

## âœ… RTZR ì •ìƒ ì‘ë™ í™•ì¸

### ğŸ¯ ì‹¤ì œ í†µí™”ì—ì„œì˜ ë™ì‘ íë¦„

```
ì‚¬ìš©ì ë°œí™”
    â†“
AudioProcessor (ì¹¨ë¬µ ê°ì§€ 0.5ì´ˆ)
    â†“
RTZR STT í˜¸ì¶œ (~2.4ì´ˆ)
    â†“
í…ìŠ¤íŠ¸ ê²°ê³¼ ë°˜í™˜
```

---

## ğŸ“Š ì‹¤ì œ í†µí™” ì„±ëŠ¥ ë¶„ì„

### ë°œí™” 1: "ì•ˆë…•í•˜ì„¸ìš”"
```
â±ï¸  ì‹œê°„: 2.43ì´ˆ
ğŸ“ ê²°ê³¼: "ì•ˆë…•í•˜ì„¸ìš”"
ğŸ“Š ì¤‘ê°„ ê²°ê³¼: "ì•ˆë…•í•˜ì„¸ìš”" (final: false, confidence: 0)
ğŸ“Š ìµœì¢… ê²°ê³¼: "ì•ˆë…•í•˜ì„¸ìš”" (final: true, confidence: 0.1)
```

### ë°œí™” 2: "ì˜¤ëŠ˜ ë­ í–ˆëŠ”ì§€ ì•„ì„¸ìš”"
```
â±ï¸  ì‹œê°„: 2.55ì´ˆ
ğŸ“ ê²°ê³¼: "ì˜¤ëŠ˜ ë­ í–ˆëŠ”ì§€ ì•„ì„¸ìš”"
ğŸ“Š ì¤‘ê°„ ê²°ê³¼: "ì˜¤ëŠ˜ ë­ í–ˆëŠ”ì§€ ì•„ì„¸ìš”" (final: false, confidence: 0)
ğŸ“Š ìµœì¢… ê²°ê³¼: "ì˜¤ëŠ˜ ë­ í–ˆëŠ”ì§€ ì•„ì„¸ìš”" (final: true, confidence: 0.41)
   - ì˜¤ëŠ˜ (start_at: 280ms, duration: 220ms)
   - ë­ (start_at: 560ms, duration: 100ms)
   - í–ˆëŠ”ì§€ (start_at: 720ms, duration: 340ms)
   - ì•„ì„¸ìš” (start_at: 1120ms, duration: 540ms)
```

### ë°œí™” 3: "ëŠ˜ ì²­ì†Œí–ˆì–´ìš”"
```
â±ï¸  ì‹œê°„: 2.65ì´ˆ
ğŸ“ ê²°ê³¼: "ëŠ˜ ì²­ì†Œí–ˆì–´ìš”"
ğŸ“Š ìµœì¢… ê²°ê³¼: "ëŠ˜ ì²­ì†Œí–ˆì–´ìš”" (final: true, confidence: 0.35)
```

---

## ğŸ” ìƒì„¸ í”„ë¡œì„¸ìŠ¤ ë¶„ì„

### 1. RTZR ì´ˆê¸°í™” âœ…
```
2025-10-27 03:13:06.117 - STT Service ì´ˆê¸°í™” ì‹œì‘ - ì œê³µì: rtzr
2025-10-27 03:13:06.117 - RTZR ìŠ¤íŠ¸ë¦¬ë° STT ì´ˆê¸°í™” ì¤‘...
2025-10-27 03:13:06.117 - RTZR STT ì´ˆê¸°í™” ì™„ë£Œ
2025-10-27 03:13:06.117 - API Base: https://openapi.vito.ai
```

### 2. ì‹¤ì œ STT í˜¸ì¶œ ê³¼ì •

#### ì¸ì¦ í† í° ë°œê¸‰ (~120ms)
```
03:16:25.609 - ğŸ” ì¸ì¦ í† í° ë°œê¸‰ ì¤‘...
03:16:25.732 - âœ… ì¸ì¦ í† í° ë°œê¸‰ ì™„ë£Œ
```

#### WebSocket ì—°ê²° (~80ms)
```
03:16:25.732 - ğŸŒ WebSocket ì—°ê²° ì¤‘...
wss://openapi.vito.ai/v1/transcribe:streaming?
  sample_rate=8000&
  encoding=LINEAR16&
  use_itn=true&
  use_disfluency_filter=true&
  use_profanity_filter=false
```

#### ì˜¤ë””ì˜¤ ë°ì´í„° ì „ì†¡ (~160ms)
```
03:16:25.887 - ğŸ“¤ ì˜¤ë””ì˜¤ ë°ì´í„° ì „ì†¡: 112000 bytes
03:16:25.887 - ğŸ“¤ EOS ì „ì†¡ ì™„ë£Œ
```

#### ê²°ê³¼ ìˆ˜ì‹  (~130ms)
```
03:16:26.018 - ğŸ“¥ [ì¤‘ê°„] "ì•ˆë…•í•˜ì„¸ìš”" (final: false)
03:16:26.022 - ğŸ“¥ [ìµœì¢…] "ì•ˆë…•í•˜ì„¸ìš”" (final: true, confidence: 0.1)
03:16:28.035 - âœ… RTZR STT ì™„ë£Œ: 2.43ì´ˆ
```

---

## âš ï¸ ë°œê²¬ëœ ë¬¸ì œ

### 1. í† í° ë°œê¸‰ì´ ë§¤ë²ˆ ë°œìƒ âŒ

ê° STT í˜¸ì¶œë§ˆë‹¤ ìƒˆ í† í°ì„ ë°œê¸‰:
```
ë°œí™” 1: ğŸ” ì¸ì¦ í† í° ë°œê¸‰ ì¤‘...
ë°œí™” 2: ğŸ” ì¸ì¦ í† í° ë°œê¸‰ ì¤‘...
ë°œí™” 3: ğŸ” ì¸ì¦ í† í° ë°œê¸‰ ì¤‘...
```

**ë¬¸ì œ**: ì•½ 100-120ms ì†Œëª¨
**í•´ê²°**: í† í° ìºì‹± í•„ìš” (ìœ íš¨ê¸°ê°„ ë³´í†µ 1ì‹œê°„)

---

### 2. ì‹œê°„ ë¶„ì„

```
ì´ 2.43ì´ˆ = 
   ì¸ì¦ í† í° ë°œê¸‰: ~120ms
   WebSocket ì—°ê²°: ~80ms
   ì˜¤ë””ì˜¤ ì „ì†¡: ~160ms
   STT ì²˜ë¦¬ ë° ê²°ê³¼ ìˆ˜ì‹ : ~1,950ms
   ê¸°íƒ€ ì˜¤ë²„í—¤ë“œ: ~120ms
```

---

## ğŸ¯ ì„±ëŠ¥ ê°œì„  ê°€ëŠ¥ì„±

### í˜„ì¬ ì„±ëŠ¥
- **í‰ê·  ì‘ë‹µ**: 2.4ì´ˆ ~ 2.6ì´ˆ
- **í† í° ë°œê¸‰**: ë§¤ë²ˆ ìƒˆë¡œ ë°œê¸‰ (120ms Ã— N)
- **WebSocket**: ë§¤ë²ˆ ìƒˆ ì—°ê²° (80ms Ã— N)

### ê°œì„  í›„ ì˜ˆìƒ
- **í† í° ìºì‹±**: 120ms ì œê±°
- **ì—°ê²° ì¬ì‚¬ìš©**: 80ms ì œê±°
- **ì˜ˆìƒ ì´ ì‹œê°„**: **ì•½ 2.2ì´ˆ** â†’ **ì•½ 1,800msë¡œ ë‹¨ì¶• ê°€ëŠ¥**

---

## ğŸ“ ì‹¤ì œ ì¸ì‹ í’ˆì§ˆ

### ë°œí™” ì •í™•ë„
âœ… ëª¨ë“  ë°œí™”ê°€ ì •í™•íˆ ì¸ì‹ë¨
- "ì•ˆë…•í•˜ì„¸ìš”"
- "ì˜¤ëŠ˜ ë­ í–ˆëŠ”ì§€ ì•„ì„¸ìš”"
- "ëŠ˜ ì²­ì†Œí–ˆì–´ìš”"

### Confidence ìˆ˜ì¤€
- ë°œí™” 1: 0.1 (ë‚®ìŒ)
- ë°œí™” 2: 0.41 (ì¤‘ê°„)
- ë°œí™” 3: 0.35 (ì¤‘ê°„)

### ë‹¨ì–´ ë‹¨ìœ„ ì •í™•ë„
RTZRì€ ë‹¨ì–´ë³„ íƒ€ì„ìŠ¤íƒ¬í”„ë„ ì œê³µ:
```json
{
  "text": "ì˜¤ëŠ˜",
  "start_at": 280,
  "duration": 220
}
```

---

## ğŸ‰ ê²°ë¡ 

### âœ… í˜„ì¬ ìƒíƒœ
1. **RTZR ì •ìƒ ì‘ë™** âœ…
2. **ì‹¤ì œ í†µí™”ì—ì„œ ì‚¬ìš© ì¤‘** âœ…
3. **í•œêµ­ì–´ ì¸ì‹ ì •í™•** âœ…
4. **ì‹¤ì‹œê°„ ê²°ê³¼ ìˆ˜ì‹ ** âœ…

### âš ï¸ ê°œì„  í•„ìš”
1. **í† í° ìºì‹±** â†’ 120ms ì œê±°
2. **WebSocket ì—°ê²° ì¬ì‚¬ìš©** â†’ 80ms ì œê±°
3. **ì˜ˆìƒ ì´ ê°œì„ **: ì•½ **200ms ë‹¨ì¶•**

### ğŸ“Š ìµœì¢… í‰ê°€
- **í˜„ì¬**: 2.4ì´ˆ (Google ëŒ€ë¹„ +1.75ì´ˆ)
- **ê°œì„  í›„**: ì•½ 2.2ì´ˆ
- **í’ˆì§ˆ**: ë§¤ìš° ì¢‹ìŒ âœ…
- **ì‹¤ì œ ì‚¬ìš©**: **ì „í˜€ ë¬¸ì œì—†ìŒ** âœ…

---

## ğŸš€ ì¦‰ì‹œ ì ìš© ê°€ëŠ¥í•œ ê°œì„ 

### í† í° ìºì‹± êµ¬í˜„ (ì‰½ê³  íš¨ê³¼ì )

`stt_service.py`ì— ì¶”ê°€:

```python
class STTService:
    def __init__(self):
        self._cached_token = None
        self._token_expires_at = 0
        # ...
    
    async def _get_rtzr_token(self):
        # ìºì‹œëœ í† í° ìœ íš¨í•˜ë©´ ì¬ì‚¬ìš©
        if self._cached_token and self._token_expires_at > time.time():
            logger.debug("â™»ï¸ ìºì‹œëœ í† í° ì¬ì‚¬ìš©")
            return self._cached_token
        
        # ìƒˆ í† í° ë°œê¸‰
        logger.info("ğŸ” ìƒˆ RTZR í† í° ë°œê¸‰ ì¤‘...")
        auth_response = requests.post(...)
        token = auth_response.json()["access_token"]
        
        # ìºì‹œ (1ì‹œê°„)
        self._cached_token = token
        self._token_expires_at = time.time() + 3600
        
        return token
```

ê·¸ë¦¬ê³  `_transcribe_rtzr`ì—ì„œ:
```python
# ê¸°ì¡´
auth_response = requests.post(...)
token = auth_response.json()["access_token"]

# ê°œì„ 
token = await self._get_rtzr_token()
```

**ì˜ˆìƒ ê°œì„ **: ì•½ **100ms ë‹¨ì¶•** âœ…

