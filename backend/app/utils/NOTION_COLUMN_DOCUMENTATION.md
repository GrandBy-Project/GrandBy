# ğŸ“Š ì„±ëŠ¥ ë©”íŠ¸ë¦­ JSON ì»¬ëŸ¼ ì„¤ëª…

> **íŒŒì¼ëª…**: `call_metrics_YYYYMMDD_HHMMSS_{call_sid}.json`  
> **ìš©ë„**: ë…¸ì…˜ì— ë¶™ì—¬ë„£ì–´ í…ŒìŠ¤íŠ¸ ê²°ê³¼ ë¬¸ì„œí™” ì‹œ ì°¸ê³ 

---

## ğŸ“‹ ì „ì²´ êµ¬ì¡° ì»¬ëŸ¼

| ì»¬ëŸ¼ëª… | íƒ€ì… | ì„¤ëª… | ì˜ˆì‹œ |
|--------|------|------|------|
| `call_sid` | string | Twilio í†µí™” ì„¸ì…˜ ID (ê³ ìœ  ì‹ë³„ì) | `"CA5141ae571068877772f2394440aa5458"` |
| `call_start_time` | string | í†µí™” ì‹œì‘ ì‹œê° (YYYYMMDD_HHMMSS í˜•ì‹) | `"20251103_082636"` |
| `call_start_datetime` | string | í†µí™” ì‹œì‘ ë‚ ì§œ ë° ì‹œê°„ (ì½ê¸° ì‰¬ìš´ í˜•ì‹) | `"2025-11-03 08:26:36"` |
| `turns` | array | ê° ëŒ€í™” í„´ë³„ ìƒì„¸ ë©”íŠ¸ë¦­ ë°°ì—´ | `[{...}, {...}]` |
| `summary` | object | í†µí™” ì „ì²´ ìš”ì•½ í†µê³„ | `{...}` |

---

## ğŸ”„ Turn (ëŒ€í™” í„´) ì»¬ëŸ¼

| ì»¬ëŸ¼ëª… | íƒ€ì… | ì„¤ëª… | ì¸¡ì • ì‹œì  |
|--------|------|------|-----------|
| `turn_number` | number | ëŒ€í™” í„´ ë²ˆí˜¸ (1ë¶€í„° ì‹œì‘) | - |
| `user_utterance` | string | ì‚¬ìš©ìê°€ ë°œí™”í•œ ë‚´ìš© (STT ì¸ì‹ ê²°ê³¼) | STT ìµœì¢… ì¸ì‹ ì‹œ |
| `ai_response` | string | AIê°€ ìƒì„±í•œ ì‘ë‹µ ë‚´ìš© | LLM ì™„ë£Œ ì‹œ |
| `turn_start_time` | number | í„´ ì‹œì‘ ì‹œê°„ (Unix timestamp, ì´ˆ) | STT ìµœì¢… ì¸ì‹ ì‹œì  |
| `turn_start_time_formatted` | string | í„´ ì‹œì‘ ì‹œê°„ (HH:MM:SS.mmm í˜•ì‹) | - |

---

## ğŸ™ï¸ STT (Speech-to-Text) ì»¬ëŸ¼

| ì»¬ëŸ¼ëª… | íƒ€ì… | ì„¤ëª… | ì¸¡ì • ì‹œì  | ì‹œì‘ì  â†’ ì¢…ë£Œì  |
|--------|------|------|-----------|----------------|
| `user_speech_start_time` | number | ì‚¬ìš©ìê°€ ì‹¤ì œë¡œ ë§í•˜ê¸° ì‹œì‘í•œ ì‹œì  | RTZR ì²« ë¶€ë¶„ ì¸ì‹ ì‹œ | - |
| `user_speech_start_time_formatted` | string | ì‚¬ìš©ì ë°œí™” ì‹œì‘ ì‹œê°„ (HH:MM:SS.mmm) | - | - |
| `first_partial_time` | number | STT ì²« ë¶€ë¶„ ì¸ì‹ ê²°ê³¼ë¥¼ ë°˜í™˜í•œ ì‹œê°„ | ì²« ë¶€ë¶„ ì¸ì‹ ë°œìƒ ì‹œ | - |
| `final_recognition_time` | number | STT ìµœì¢… ì¸ì‹ ê²°ê³¼ë¥¼ ë°˜í™˜í•œ ì‹œê°„ | RTZR `is_final=true` ìˆ˜ì‹  ì‹œ | - |
| `final_recognition_time_formatted` | string | STT ìµœì¢… ì¸ì‹ ì‹œê°„ (HH:MM:SS.mmm) | - | - |
| `latency` | number | **STT ì „ì²´ ì§€ì—°ì‹œê°„** (ì´ˆ) | ê³„ì‚°ê°’ | `ì‚¬ìš©ì ë°œí™” ì‹œì‘` â†’ `ìµœì¢… ì¸ì‹ ì™„ë£Œ` |
| `partial_latency` | number | **STT ë¶€ë¶„ ì¸ì‹ ì§€ì—°ì‹œê°„** (ì´ˆ) | ê³„ì‚°ê°’ | `ì‚¬ìš©ì ë°œí™” ì‹œì‘` â†’ `ì²« ë¶€ë¶„ ì¸ì‹` |

**ëª©í‘œì¹˜**:
- `latency`: p50 â‰¤ 1.0ì´ˆ, p95 â‰¤ 1.5ì´ˆ, p99 â‰¤ 2.0ì´ˆ
- `partial_latency`: p50 â‰¤ 0.3ì´ˆ, p95 â‰¤ 0.5ì´ˆ, p99 â‰¤ 0.7ì´ˆ

---

## ğŸ’¬ LLM (Large Language Model) ì»¬ëŸ¼

| ì»¬ëŸ¼ëª… | íƒ€ì… | ì„¤ëª… | ì¸¡ì • ì‹œì  | ì‹œì‘ì  â†’ ì¢…ë£Œì  |
|--------|------|------|-----------|----------------|
| `first_token_time` | number | LLMì´ ì²« ë²ˆì§¸ í† í°ì„ ìƒì„±í•œ ì‹œê°„ | OpenAI API ì²« chunk ìˆ˜ì‹  ì‹œ | - |
| `first_token_time_formatted` | string | LLM ì²« í† í° ìƒì„± ì‹œê°„ (HH:MM:SS.mmm) | - | - |
| `completion_time` | number | LLMì´ ì „ì²´ ì‘ë‹µ ìƒì„±ì„ ì™„ë£Œí•œ ì‹œê°„ | OpenAI API `[DONE]` ìˆ˜ì‹  ì‹œ | - |
| `completion_time_formatted` | string | LLM ì™„ë£Œ ì‹œê°„ (HH:MM:SS.mmm) | - | - |
| `first_token_latency` | number | **LLM ì²« í† í° ì§€ì—°ì‹œê°„ (TTFT)** (ì´ˆ) | ê³„ì‚°ê°’ | `STT ìµœì¢… ì¸ì‹` â†’ `LLM ì²« í† í°` |
| `completion_latency` | number | **LLM ì™„ë£Œ ì§€ì—°ì‹œê°„** (ì´ˆ) | ê³„ì‚°ê°’ | `LLM ì²« í† í°` â†’ `LLM ì™„ë£Œ` |

**ëª©í‘œì¹˜**:
- `first_token_latency`: p50 â‰¤ 1.0ì´ˆ, p95 â‰¤ 1.5ì´ˆ, p99 â‰¤ 2.0ì´ˆ
- `completion_latency`: p50 â‰¤ 2.0ì´ˆ, p95 â‰¤ 3.0ì´ˆ, p99 â‰¤ 4.0ì´ˆ

---

## ğŸ”Š TTS (Text-to-Speech) ì»¬ëŸ¼

| ì»¬ëŸ¼ëª… | íƒ€ì… | ì„¤ëª… | ì¸¡ì • ì‹œì  | ì‹œì‘ì  â†’ ì¢…ë£Œì  |
|--------|------|------|-----------|----------------|
| `start_time` | number | TTS ë³€í™˜ ì‘ì—…ì„ ì‹œì‘í•œ ì‹œê°„ (ì²« ë¬¸ì¥) | ì²« ë¬¸ì¥ TTS API í˜¸ì¶œ ì‹œì‘ ì‹œ | - |
| `start_time_formatted` | string | TTS ì‹œì‘ ì‹œê°„ (HH:MM:SS.mmm) | - | - |
| `first_completion_time` | number | ì²« ë²ˆì§¸ ë¬¸ì¥ì˜ TTS ë³€í™˜ ì™„ë£Œ ì‹œê°„ | ì²« ë¬¸ì¥ TTS API ì‘ë‹µ ìˆ˜ì‹  ì‹œ | - |
| `first_completion_time_formatted` | string | TTS ì²« ì™„ë£Œ ì‹œê°„ (HH:MM:SS.mmm) | - | - |
| `completion_time` | number | ì „ì²´ TTS ë³€í™˜ ì™„ë£Œ ì‹œê°„ (ë§ˆì§€ë§‰ ë¬¸ì¥) | ë§ˆì§€ë§‰ ë¬¸ì¥ TTS API ì‘ë‹µ ìˆ˜ì‹  ì‹œ | - |
| `completion_time_formatted` | string | TTS ì „ì²´ ì™„ë£Œ ì‹œê°„ (HH:MM:SS.mmm) | - | - |
| `latency` | number | **TTS ë³€í™˜ ì§€ì—°ì‹œê°„** (ì´ˆ) | ê³„ì‚°ê°’ | `TTS ì‹œì‘` â†’ `TTS ì™„ë£Œ` |
| `first_token_to_first_tts_completion_latency` | number | **LLMâ†’TTS íŒŒì´í”„ë¼ì¸ ì§€ì—°ì‹œê°„** (ì´ˆ) | ê³„ì‚°ê°’ | `LLM ì²« í† í°` â†’ `ì²« TTS ì™„ë£Œ` |

**ëª©í‘œì¹˜**:
- `latency`: p50 â‰¤ 0.5ì´ˆ, p95 â‰¤ 0.8ì´ˆ, p99 â‰¤ 1.0ì´ˆ
- `first_token_to_first_tts_completion_latency`: p50 â‰¤ 0.5ì´ˆ, p95 â‰¤ 0.8ì´ˆ, p99 â‰¤ 1.0ì´ˆ

**ì¤‘ìš”**: `first_token_to_first_tts_completion_latency`ëŠ” ì‚¬ìš©ìê°€ ìŒì„±ì„ ë“¤ê¸° ì‹œì‘í•˜ëŠ” ì‹œì ì„ ì¸¡ì •í•˜ëŠ” í•µì‹¬ ì§€í‘œì…ë‹ˆë‹¤.

---

## ğŸ”— E2E (End-to-End) ì»¬ëŸ¼

| ì»¬ëŸ¼ëª… | íƒ€ì… | ì„¤ëª… | ì¸¡ì • ì‹œì  | ì‹œì‘ì  â†’ ì¢…ë£Œì  |
|--------|------|------|-----------|----------------|
| `turn_end_time` | number | ëŒ€í™” í„´ì´ ì™„ë£Œëœ ì‹œê°„ | LLM ì‘ë‹µ ìƒì„± ì™„ë£Œ ì‹œ | - |
| `turn_end_time_formatted` | string | í„´ ì¢…ë£Œ ì‹œê°„ (HH:MM:SS.mmm) | - | - |
| `latency` | number | **E2E ì „ì²´ ì§€ì—°ì‹œê°„** (ì´ˆ) | ê³„ì‚°ê°’ | `í„´ ì‹œì‘ (STT ì™„ë£Œ)` â†’ `í„´ ì¢…ë£Œ (LLM ì™„ë£Œ)` |

**ëª©í‘œì¹˜**:
- `latency`: p50 â‰¤ 2.5ì´ˆ, p95 â‰¤ 3.5ì´ˆ, p99 â‰¤ 5.0ì´ˆ

**ì˜ë¯¸**: ì‚¬ìš©ì ë°œí™” ì™„ë£Œë¶€í„° AI ì‘ë‹µ ìƒì„± ì™„ë£Œê¹Œì§€ì˜ ì „ì²´ ì‹œê°„ (STT + LLM ì²˜ë¦¬ ì‹œê°„)

---

## ğŸ“ˆ Statistics (í†µê³„) ì»¬ëŸ¼

ê° í„´ë§ˆë‹¤ í˜„ì¬ê¹Œì§€ì˜ ëˆ„ì  í†µê³„ê°€ ê³„ì‚°ë˜ì–´ ê¸°ë¡ë©ë‹ˆë‹¤.

### í†µê³„ ê°’ ì„¤ëª…

| ì»¬ëŸ¼ëª… | íƒ€ì… | ì„¤ëª… |
|--------|------|------|
| `count` | number | ì¸¡ì • íšŸìˆ˜ (í˜„ì¬ê¹Œì§€ ëˆ„ì ëœ ë°ì´í„° ê°œìˆ˜) |
| `avg` | number | í‰ê· ê°’ (ëª¨ë“  ì¸¡ì •ê°’ì˜ í‰ê· ) |
| `min` | number | ìµœì†Œê°’ |
| `max` | number | ìµœëŒ€ê°’ |
| `p50` | number | 50ë²ˆì§¸ ë°±ë¶„ìœ„ìˆ˜ (ì¤‘ì•™ê°’, median) - 50%ì˜ ìš”ì²­ì´ ì´ ì‹œê°„ ë‚´ì— ì™„ë£Œ |
| `p95` | number | 95ë²ˆì§¸ ë°±ë¶„ìœ„ìˆ˜ - 95%ì˜ ìš”ì²­ì´ ì´ ì‹œê°„ ë‚´ì— ì™„ë£Œ |
| `p99` | number | 99ë²ˆì§¸ ë°±ë¶„ìœ„ìˆ˜ - 99%ì˜ ìš”ì²­ì´ ì´ ì‹œê°„ ë‚´ì— ì™„ë£Œ |

### ê³„ì‚°ë˜ëŠ” ë©”íŠ¸ë¦­ ì¢…ë¥˜

ê° í„´ì˜ `statistics` ê°ì²´ì—ëŠ” ë‹¤ìŒ 7ê°€ì§€ ë©”íŠ¸ë¦­ì˜ í†µê³„ê°€ í¬í•¨ë©ë‹ˆë‹¤:

1. **`stt_latency`** - STT ì „ì²´ ì§€ì—°ì‹œê°„ í†µê³„
2. **`stt_partial_latency`** - STT ë¶€ë¶„ ì¸ì‹ ì§€ì—°ì‹œê°„ í†µê³„
3. **`llm_first_token_latency`** - LLM ì²« í† í° ìƒì„± ì§€ì—°ì‹œê°„ í†µê³„
4. **`llm_completion_latency`** - LLM ì™„ë£Œ ì§€ì—°ì‹œê°„ í†µê³„
5. **`tts_latency`** - TTS ë³€í™˜ ì§€ì—°ì‹œê°„ í†µê³„
6. **`first_token_to_first_tts_completion_latency`** - LLMâ†’TTS íŒŒì´í”„ë¼ì¸ ì§€ì—°ì‹œê°„ í†µê³„
7. **`e2e_latency`** - ì „ì²´ í„´ ì§€ì—°ì‹œê°„ í†µê³„

**ì°¸ê³ **: ë°ì´í„° ê°œìˆ˜ê°€ ì ì„ ë•Œ(10ê°œ ë¯¸ë§Œ) p50, p95, p99 ê°’ì´ ë¹„ìŠ·í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤ (ì •ìƒ).

---

## ğŸ“Š Summary (ìš”ì•½) ì»¬ëŸ¼

| ì»¬ëŸ¼ëª… | íƒ€ì… | ì„¤ëª… |
|--------|------|------|
| `call_duration_seconds` | number | í†µí™” ì „ì²´ ì§€ì† ì‹œê°„ (ì´ˆ) |
| `total_turns` | number | ì´ ëŒ€í™” í„´ ìˆ˜ |
| `statistics` | object | í†µí™” ì „ì²´ í†µê³„ (ìœ„ì˜ Statisticsì™€ ë™ì¼í•œ êµ¬ì¡°) |
| `call_end_time` | string | í†µí™” ì¢…ë£Œ ì‹œê° (YYYYMMDD_HHMMSS í˜•ì‹) |

---

## ğŸ”„ ì‹œê°„ ì¸¡ì • íë¦„ë„

```
[ì‚¬ìš©ì ë°œí™” ì‹œì‘]
    â†“
[user_speech_start_time] â”€â”€â”€â”
    â†“                        â”‚ partial_latency
[first_partial_time]         â”‚
    â†“                        â”‚ latency (STT)
[final_recognition_time] â†â”€â”€â”€â”˜
    â†“
[turn_start_time] (ë™ì¼)
    â†“
[first_token_time] â”€â”€â”€â”€â”€â”€â”€â”€â”€â” first_token_latency
    â†“                        â”‚
[TTS start_time]             â”‚
    â†“                        â”‚ first_token_to_first_tts_completion_latency
[first_completion_time] â†â”€â”€â”€â”€â”¼â”€
    â†“                        â”‚ completion_latency
[TTS completion_time]         â”‚
    â†“                        â”‚
[completion_time] â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
[turn_end_time] (ë™ì¼)
    â†“
E2E latency ê³„ì‚°
```

---

## ğŸ“ ì°¸ê³ ì‚¬í•­

1. **ì‹œê°„ í˜•ì‹**:
   - Unix timestamp: ì´ˆ ë‹¨ìœ„ ì‹¤ìˆ˜ (ì˜ˆ: `1762158404.0777066`)
   - Formatted: "HH:MM:SS.mmm" í˜•ì‹ (ì˜ˆ: `"00:00:07.900"`)

2. **ì§€ì—°ì‹œê°„ ê³„ì‚°**:
   - ëª¨ë“  ì§€ì—°ì‹œê°„(latency)ì€ ì–‘ìˆ˜ì—¬ì•¼ í•©ë‹ˆë‹¤
   - ìŒìˆ˜ ê°’ì´ ë‚˜íƒ€ë‚˜ë©´ ì¸¡ì • ì˜¤ë¥˜ì…ë‹ˆë‹¤

3. **í†µê³„ ê³„ì‚°**:
   - ê° í„´ ì™„ë£Œ ì‹œì ì— ì‹¤ì‹œê°„ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë©ë‹ˆë‹¤
   - ëˆ„ì  í†µê³„ì´ë¯€ë¡œ ë§ˆì§€ë§‰ í„´ì˜ `statistics`ê°€ ì „ì²´ í†µí™”ì˜ ìµœì¢… í†µê³„ì…ë‹ˆë‹¤
   - `summary.statistics`ëŠ” ëª¨ë“  í„´ì˜ ìµœì¢… í†µê³„ì™€ ë™ì¼í•©ë‹ˆë‹¤

4. **null ê°’**:
   - `first_partial_time`ì´ `null`ì¸ ê²½ìš°: ë¶€ë¶„ ì¸ì‹ì´ ë°œìƒí•˜ì§€ ì•ŠìŒ (ì˜ˆ: ë§¤ìš° ì§§ì€ ë°œí™”)
   - `partial_latency`ê°€ `null`ì¸ ê²½ìš°: ë¶€ë¶„ ì¸ì‹ì´ ì—†ì–´ ê³„ì‚° ë¶ˆê°€

---

## âœ… ë…¸ì…˜ ì‚¬ìš© íŒ

1. ì´ í‘œë¥¼ ë…¸ì…˜ì— ë³µì‚¬í•˜ì—¬ ë¶™ì—¬ë„£ìœ¼ì„¸ìš”
2. ê° ì»¬ëŸ¼ì˜ ì˜ë¯¸ë¥¼ ì´í•´í•˜ê³  í…ŒìŠ¤íŠ¸ ê²°ê³¼ë¥¼ ë¶„ì„í•  ë•Œ ì°¸ê³ í•˜ì„¸ìš”
3. ëª©í‘œì¹˜ì™€ ì‹¤ì œ ì¸¡ì •ê°’ì„ ë¹„êµí•˜ì—¬ ì„±ëŠ¥ ê°œì„  í¬ì¸íŠ¸ë¥¼ íŒŒì•…í•˜ì„¸ìš”
4. Statisticsì˜ p50, p95, p99 ê°’ì„ í†µí•´ ì„±ëŠ¥ ì•ˆì •ì„±ì„ í‰ê°€í•˜ì„¸ìš”

